<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
      xmlns:adm="http://www.flexive.com/jsf/admin"
      xmlns:fx="http://www.flexive.com/jsf/core">
<body>

<ui:composition template="/adm/contentTemplate.xhtml">

    <ui:define name="body">
        <a4j:form id="frm">
            <adm:tab label="#{fxMessageBean['ScriptConsole.tabtitle.main']}" active="true" id="tab1"/>

            <a4j:outputPanel id="systemInfos">
                <fieldset class="formFields">
                    <legend>#{fxMessageBean['ScriptConsole.group.code']}</legend>
                    <a4j:outputPanel ajaxRendered="true" layout="block">
                        <h:inputTextarea id="codeArea" cols="120" rows="30" value="#{scriptConsoleBean.code}"/>
                    </a4j:outputPanel>
                    <br/>
                    #{fxMessageBean['ScriptConsole.label.Language']}&nbsp;
                    <h:selectOneListbox label="XXX" size="1" value="#{scriptConsoleBean.language}">
                        <f:selectItems value="#{fxSelectBean.scriptingEngines}"/>
                        <a4j:support event="onchange" reRender="verifyButton"/>
                    </h:selectOneListbox>
                    <br/>
                    <h:selectBooleanCheckbox title="#{fxMessageBean['ScriptConsole.label.runAtWeb']}"
                                             value="#{scriptConsoleBean.web}"/>
                    #{fxMessageBean['ScriptConsole.label.runAtWeb']}<br/><br/>
                    <a4j:commandButton id="executeButton" reRender="resultPanel"
                                       value="#{fxMessageBean['ScriptConsole.button.execute']}"
                                       onclick="parent.lockScreen()" oncomplete="parent.unlockScreen()"/>
                    <a4j:commandButton id="defaultImports" value="#{fxMessageBean['Script.button.defaultImports']}"
                                       action="#{scriptConsoleBean.addDefaultImports}" reRender="codeArea"
                                       eventsQueue="main" requestDelay="300"
                                       style="margin-left:20px"/>
                    <a4j:outputPanel ajaxRendered="true" id="verifyPanel">
                        <a4j:commandButton id="verifyButton" value="#{fxMessageBean['Script.button.verify']}"
                                           rendered="#{scriptConsoleBean.verifyButtonEnabled}"
                                           action="#{scriptConsoleBean.checkScriptSyntax}" style="margin-left:20px"/>
                    </a4j:outputPanel>
                </fieldset>

                <br/><br/>
                <a4j:outputPanel id="resultPanel">
                    <pre>#{scriptConsoleBean.result}</pre>
                    <span style="color:gray;font-style:italic;">
                        #{fxMessageBean['ScriptConsole.label.executionTime, #{scriptConsoleBean.executionTime}']}
                    </span>
                </a4j:outputPanel>
            </a4j:outputPanel>

            <adm:toolbarPluginButtons/>
        </a4j:form>
    </ui:define>

</ui:composition>

</body>
</html>
