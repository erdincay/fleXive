<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
      xmlns:adm="http://www.flexive.com/jsf/admin"
      xmlns:fx="http://www.flexive.com/jsf/core">
<body>

<ui:composition template="/adm/contentTemplate.xhtml">

    <ui:define name="body">
        <a4j:form id="frm">
            <adm:tab label="#{fxMessageBean['ScriptConsole.tabtitle.main']}" active="true" id="tab1"/>

            <a4j:outputPanel id="systemInfos">
                <fieldset class="formFields">
                    <legend>#{fxMessageBean['ScriptConsole.group.code']}</legend>
                    <a4j:outputPanel ajaxRendered="true" layout="block" style="width: 700px;">
                        <fx:resizeable>
                            <h:inputTextarea id="codeArea" value="#{scriptConsoleBean.code}" rows="15"
                                             style="width: 100%; height: 100%"/>
                        </fx:resizeable>
                    </a4j:outputPanel>
                    <br/>
                    #{fxMessageBean['ScriptConsole.label.Language']}&nbsp;
                    <h:selectOneListbox label="XXX" size="1" value="#{scriptConsoleBean.language}">
                        <f:selectItems value="#{fxSelectBean.scriptingEngines}"/>
                        <a4j:support event="onchange" reRender="verifyPanel" oncomplete="ajaxButtonRequest()"/>
                    </h:selectOneListbox>
                    <br/>
                    <h:selectBooleanCheckbox title="#{fxMessageBean['ScriptConsole.label.runAtWeb']}"
                                             value="#{scriptConsoleBean.web}"/>
                    #{fxMessageBean['ScriptConsole.label.runAtWeb']}<br/><br/>

                    <adm:commandButton id="executeButton" labelKey="ScriptConsole.button.execute" icon="run"
                                       location="both" lockscreen="false" bean="#{scriptConsoleBean}"
                                       action="runScript"/>
                    <adm:shortcut elementId="commandButton_executeButton"/>

                    <adm:commandButton id="defaultImports" labelKey="Script.button.defaultImports" icon="compact"
                                       bean="#{scriptConsoleBean}" action="addDefaultImports" location="both"
                                       lockscreen="false"/>

                    <a4j:outputPanel id="verifyPanel" layout="block">
                        <adm:commandButton id="verifyButton" labelKey="Script.button.verify" icon="check"
                                           bean="#{scriptConsoleBean}" action="checkScriptSyntax"
                                           rendered="#{scriptConsoleBean.verifyButtonEnabled}"
                                           lockscreen="false" ajax="true" toolbarPosition="2"/>
                    </a4j:outputPanel>
                </fieldset>
                <br/><br/>
                <a4j:outputPanel id="resultPanel" rendered="#{scriptConsoleBean.result != null}">
                    <pre>#{scriptConsoleBean.result}</pre>
                    <span style="color:gray;font-style:italic;">
                        #{fxMessageBean['ScriptConsole.label.executionTime, #{scriptConsoleBean.executionTime}']}
                    </span>
                </a4j:outputPanel>
            </a4j:outputPanel>

            <adm:toolbarPluginButtons/>
        </a4j:form>
    </ui:define>

</ui:composition>

</body>
</html>
