<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:adm="http://www.flexive.com/jsf/admin"
      xmlns:fx="http://www.flexive.com/jsf/core">
<head>
    <t:stylesheet path="/adm/css/content.css"/>
    <script type="text/javascript" src="#{fxSystemBean.contextPath}/adm/js/admin.js"/>
    <script type="text/javascript">
        <!--
        if( parent != null && parent.beginPage) {
            parent.init();
            parent.beginPage();
        }

        function gotoAdmin() {
            if( parent != null && parent.gotoNavMenu )
                parent.gotoNavMenu(3);
        }

        function createType() {
            if( parent == null || !parent.invokeContentAction )
                return;
            parent.invokeContentAction('adm/structure/typeEditor.jsf', 'createType');
            parent.gotoNavMenu(1);
        }

        function createQuery() {
            if( parent == null || !parent.invokeContentAction )
                return;
            parent.invokeContentAction("adm/search/query.jsf", "new");
            parent.gotoNavMenu(1);
        }

        function submitSearch() {
            if( parent == null || !parent.invokeContentAction ) {
                return;
            }
            var input = document.searchForm.query;
            var query = input.value;
            if (query == null || query.length == 0) {
                alertDialog("#{fxMessageBean['Global.dialog.emptyQuery']}");
                input.focus();
                return;
            }
            parent.invokeContentAction("adm/search/searchResult.jsf", "fulltextSearch", {query: query});
        }
        -->
    </script>
</head>
<body>

    <!--
        Don't use the contentTemplate.xhtml and don't include dojo.js on this page,
        otherwise we run into Dojo concurrency issues in IE7
    -->
        <adm:messages/>
        <h:form>
            <adm:toolbarPluginButtons/>
        </h:form>

    <!--
        Access the environment to keep the loading message until the environment has been initialized
        after the first login:
        #{fxSystemBean.environment}
    -->
        #{fxMessageBean['Welcome.welcome']} #{fxSystemBean.buildInfoVerbose}<br/>

        <ui:fragment rendered="#{fxSystemBean.failedLoginAttempts > 0}">
            <div class="errorMessage">
                <br/><br/>#{fxMessageBean['Global.failedLoginAttempts,#{fxSystemBean.failedLoginAttempts}']}<br/>
            </div>
        </ui:fragment>
        <br/>

        <!--<a href="javascript:promptDialog('Please enter your name:', null, function(n) { alertDialog('your name: ' + n); })">Enter it!</a>-->

        <h:form id="searchForm">
        <table class="welcometbl">
            <tr>
                <td width="200px">
                    <table class="dojoTable" width="100%">
                        <thead>
                            <tr>
                                <th>#{fxMessageBean['Welcome.label.shortcuts']}</th>
                            </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td><a href="javascript:gotoAdmin();">#{fxMessageBean['Welcome.label.administration']}</a></td>
                        </tr>
                        <tr>
                            <td><a href="javascript:createQuery();">#{fxMessageBean['Welcome.label.createQuery']}</a></td>
                        </tr>
                        <tr>
                            <td><a href="javascript:createType();">#{fxMessageBean['Welcome.label.newType']}</a></td>
                        </tr>
                        <tr>
                            <td>
                                #{fxMessageBean['Welcome.label.createContent']}<br/>
                                <div style="margin-top:3px;">
                                    <t:selectOneListbox size="1" id="type" value="#{contentEditorBean.type}">
                                        <f:selectItems value="#{contentEditorBean.editableTypes}"/>
                                    </t:selectOneListbox>
                                    <h:commandLink action="#{contentEditorBean.createNewContent}">
                                        <t:graphicImage id="createContentButton"
                                                    style="position:relative;top:3px;cursor:pointer;border:none;left:5px;" alt="search"
                                                    url="/adm/images/toolbar/new.png"/>
                                    </h:commandLink>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                #{fxMessageBean['Welcome.label.submitFTSearch']}<br/>
                                <div style="margin-top:3px;">
                                    <input type="text" name="query"
                                           onkeypress="return onReturnEval(event, 'submitSearch();')"
                                           style="margin-right:3px;width:120px;padding-left:2px;height:16px;border:1px solid #d4d9c4;"/>
                                    <t:graphicImage id="submitQueryButton"
                                                    style="position:relative;top:3px;cursor:pointer;left:5px;" alt="search"
                                                    url="/adm/images/toolbar/search.png" onclick="submitSearch();"/>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><a href="#{fxSystemBean.documentBase}globalconfig/index.jsf" target="forum.flexive.org">#{fxMessageBean['Welcome.link.globalConfig']}</a></td>
                        </tr>
                        </tbody>
                    </table>
                </td>
                <td width="200px">
                    <c:if test="#{fn:length(fxSystemBean.drops) > 0 }">
                        <table class="dojoTable links" width="100%">
                            <thead>
                                <tr>
                                    <th>#{fxMessageBean['Welcome.label.drops']}</th>
                                </tr>
                            </thead>
                            <c:forEach var="drop" items="#{fxSystemBean.drops}">
                                <tr>
                                    <td><a href="#{fxSystemBean.serverBase}/#{drop}" target="#{drop}">#{drop}</a></td>
                                </tr>
                            </c:forEach>
                        </table>
                    </c:if>
                </td>
                <td>&nbsp;</td>
            </tr>
        </table>


        <table class="welcometbl welcomeweb">
            <thead>
                <tr>
                    <th colspan="3">
                        #{fxMessageBean['Welcome.label.webresources']}
                    </th>
                </tr>
            </thead>
            <tr>
                <td width="400px">
                    <table class="dojoTable" width="100%">
                        <thead>
                            <tr>
                                <th colspan="3">#{fxMessageBean['Welcome.label.explore']}</th>
                            </tr>
                        </thead>
                        <tr>
                            <td align="center">
                                <a      href="http://www.flexive.org/explore-javaee-framework-flexive/what-is-flexive.html?source=backend"
                                        target="_new"
                                        onmouseout="img_01.src='http://www.flexive.org/fileadmin/user_upload/button_flexive_website_explore_0.jpg?source=backend';"
                                        onmouseover="img_01.src='http://www.flexive.org/fileadmin/user_upload/button_flexive_website_explore_1.jpg?source=backend';"><img
                                        name="img_01"
                                        src="http://www.flexive.org/fileadmin/user_upload/button_flexive_website_explore_0.jpg?source=backend"
                                        style="width: 110px; height: 71px;" alt="" border="0"/></a>
                            </td>
                            <td align="center">
                                <a      href="http://www.flexive.org/explore-javaee-framework-flexive/screencasts.html?source=backend"
                                        target="_new"
                                        onmouseout="img_03.src='http://www.flexive.org/fileadmin/user_upload/button_flexive_website_see_0.jpg?source=backend';"
                                        onmouseover="img_03.src='http://www.flexive.org/fileadmin/user_upload/button_flexive_website_see_1.jpg?source=backend';"><img
                                        name="img_03"
                                        src="http://www.flexive.org/fileadmin/user_upload/button_flexive_website_see_0.jpg?source=backend"
                                        style="width: 110px; height: 71px;" alt="" border="0"/></a>
                            </td>
                            <td align="center">
                                <a      href="http://www.flexive.org/community.html?source=backend"
                                        target="_new"
                                        onmouseout="img_04.src='http://www.flexive.org/fileadmin/user_upload/button_flexive_website_communicate_0.jpg?source=backend';"
                                        onmouseover="img_04.src='http://www.flexive.org/fileadmin/user_upload/button_flexive_website_communicate_1.jpg?source=backend';"><img
                                        name="img_04"
                                        src="http://www.flexive.org/fileadmin/user_upload/button_flexive_website_communicate_0.jpg?source=backend"
                                        style="width: 110px; height: 71px;" alt="" border="0"/></a>
                            </td>
                        </tr>
                    </table>
                </td>
                <td rowspan="2" width="250px">
                    <table class="dojoTable links" width="100%">
                        <thead>
                            <tr>
                                <th>#{fxMessageBean['Welcome.label.links']}</th>
                            </tr>
                        </thead>
                        <tr>
                            <td><a href="http://www.flexive.org" target="flexive.org">#{fxMessageBean['Welcome.link.home']}</a></td>
                        </tr>
                        <tr>
                            <td><a href="http://www.flexive.org/docs/website/" target="flexive.org.refdoc">#{fxMessageBean['Welcome.link.refDoc']}</a></td>
                        </tr>
                        <tr>
                            <td><a href="http://forum.flexive.org" target="forum.flexive.org">#{fxMessageBean['Welcome.link.forum']}</a></td>
                        </tr>
                        <tr>
                            <td><a href="http://www.flexive.org/community/mailinglists" target="lists.flexive.org">#{fxMessageBean['Welcome.link.lists']}</a></td>
                        </tr>
                        <tr>
                            <td><a href="http://wiki.flexive.org" target="wiki.flexive.org">#{fxMessageBean['Welcome.link.wiki']}</a></td>
                        </tr>
                        <tr>
                            <td><a href="http://issuetracker.flexive.org" target="issuetracker.flexive.org">#{fxMessageBean['Welcome.link.issuetracker']}</a></td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td>
                    <table class="dojoTable links" width="100%">
                        <thead>
                            <tr>
                                <th>#{fxMessageBean['Welcome.label.blog']}</th>
                            </tr>
                        </thead>
                        <ui:repeat var="item" value="#{rssProviderBean.feed['http://blog.flexive.org/feed/?source=backend']}">
                            <tr>
                                <td>
                                    <a href="#{item.link}" target="_new">#{item.title}</a>
                                </td>
                            </tr>
                        </ui:repeat>
                    </table>
                </td>
            </tr>
        </table>
    </h:form>

    <script type="text/javascript">
    <!--
        if (parent && parent.pageLoaded) {
            parent.pageLoaded(#{fxSystemBean.pageId}, #{fxSystemBean.pageRenderTime}, #{fxSystemBean.treeModified});

        }
    -->
    </script>

</body>
</html>