<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:fx="http://www.flexive.com/jsf/core">
<head>
    <!-- Add flexive includes -->
    <fx:includes/>
    <!-- Add our own stylesheet -->
    <link rel="stylesheet" type="text/css" href="../css/announcement-submission.css"/>
    <title>[fleXive] announcement submission example application</title>
</head>

<body>

<p class="message"><b>Welcome to the [fleXive] announcement submission example application</b></p>

<p class="message"><h:outputText value="You are logged in as "/><em class="bold"><h:outputText
        value="#{fxSystemBean.userTicket.userName}"/></em>
</p>

<!-- Output JSF error or info messages here -->
<h:messages showDetail="true" errorClass="errorMessage" infoClass="infoMessage"/>

<p><h:outputLink
        onclick="window.open('http://wiki.flexive.org/confluence/display/FX/Listing+announcements', 'In_depth_explanation', 'width=950,height=600,left=50,top=200,scrollbars=yes,resizable=yes');"
        value="#">
    What happens on this page?
</h:outputLink>
</p>

<!-- The main menu -->
<h:form>
    <ul id="mainmenu">
        <li><h:commandLink action="#{fxAuthenticationBean.logout}">Logout</h:commandLink></li>
        <c:if test="#{asubmissionBean.mayCreateAnnouncement}">
            <li>
                <h:commandLink action="#{asubmissionBean.navCreateContent}">
                    Create new announcement
                </h:commandLink>
            </li>
        </c:if>
    </ul>
</h:form>

<h:form>
    <p class="message">List of Announcements</p>
    <ui:repeat value="#{asubmissionBean.announcementEntries}" var="column">
        <div class="announcementEntry">
            <table class="announcementEntry" width="100%" border="0" cellpadding="2" cellspacing="1">
                <caption>Pk #{column[1]}</caption>
                <tr>
                    <td class="key02">Title</td>
                    <td class="value02">#{column[2]}</td>
                </tr>
                <tr>
                    <td class="key01">Submission Date</td>
                    <td class="value01">#{column[3]}</td>
                </tr>
                <tr>
                    <td class="key02">Publish Date</td>
                    <td class="value02">#{column[4]}</td>
                </tr>
                <tr>
                    <td class="key01">Submission URL</td>
                    <td class="value01">#{column[5]}</td>
                </tr>
                <tr>
                    <td class="key02">Publish URL</td>
                    <td class="value02">#{column[6]}</td>
                </tr>
            </table>
            <h:commandLink action="#{asubmissionBean.navEditContent}" rendered="#{column[0].mayEdit}">
                <f:setPropertyActionListener target="#{asubmissionBean.instancePk}" value="#{column[1]}"/>
                Edit
            </h:commandLink>
            <h:outputText value=" "/>
            <h:commandLink action="#{asubmissionBean.delete}" rendered="#{column[0].mayDelete}">
                <f:setPropertyActionListener target="#{asubmissionBean.instancePk}" value="#{column[1]}"/>
                Delete
            </h:commandLink>
        </div>
    </ui:repeat>
</h:form>

</body>

</html>