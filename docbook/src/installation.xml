<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE chapter [
        <!ENTITY % global_entities SYSTEM "global.ent">
        %global_entities;
        ]>
<chapter xml:id="installation" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude">

    <title>Installing &Flexive;
    </title>

    <xi:include href="includes/author_hbacher.xml"/>

    <section xml:id="prerequisites">
        <title>Prerequisites</title>

        <xi:include href="includes/installation_prerequisites.xml"/>

        <section xml:id="develop_flexive">
            <title>To develop &Flexive; you need
            </title>
            <para>
                If you are interested in developing &Flexive;, you will need the
                <link href="http://www.flexive.org/download">&Flexive; source code
                </link>
                and an IDE like
                <link href="http://www.eclipse.org/">Eclipse</link>
                or a proprietary solution.
            </para>
        </section>
    </section>
    <section xml:id="jboss_linux_installation">
        <title>&Flexive; installation guide for JBoss 4.2 on Linux
        </title>
        <section xml:id="jboss_linux_installation_system_configuration">
            <title>System configuration</title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>Create and copy the datasource config file
                            <filename>flexive-ds.xml</filename>
                            to
                            <filename>${jboss.home}/server/all/deploy/</filename>
                            and adapt to your datasource(s)
                            or simply copy it from the &Flexive; source tree, if available.
                            <programlisting language="xml">
                                <xi:include href="../../src/framework/resources/flexive-ds.xml" parse="text"/>
                            </programlisting>
                        </para>
                    </listitem>
                    <listitem>
                        <para>Extend
                            <filename>${jboss.home}/server/all/conf/login-config.xml</filename>
                            with the following entry:
                            <xi:include href="listings/installation_login-config.xml"/>
                        </para>
                    </listitem>
                    <listitem>
                        <para>Extend
                            <filename>${jboss.home}/server/all/conf/jboss-log4j.xml</filename>
                            to configure logging:
                            <xi:include href="listings/installation_jboss-log4j.xml"/>
                        </para>
                    </listitem>
                    <listitem>
                        <para>Create and copy the cache service file JBossCacheJNDI42-service.xml to
                            ${jboss.home}/server/all/deploy/
                            or simply copy it from the &Flexive; source tree, if available.
                            <programlisting language="xml">
                                <xi:include href="../../src/framework/resources/JBossCacheJNDI42-service.xml"
                                            parse="text"/>
                            </programlisting>
                        </para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
        <section xml:id="jboss_linux_installation_db_setup">
            <title>Database Setup
            </title>
            <para>
                To set up the databases do the following:
            </para>
            <para>Run
                <code>ant db.create db.config.create</code>
            </para>
        </section>
        <section xml:id="jboss_linux_installation_deployment">
            <title>Deployment</title>
            <para>
                Copy the
                <filename>flexive3.ear</filename>
                to
                <filename>${jboss.home}/server/all/deploy</filename>
                or run<code>ant deploy</code>.
            </para>
        </section>
        <section xml:id="jboss_linux_installation_starting_flexive">
            <title>Starting &Flexive;
            </title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>
                            Launch JBoss using
                            <programlisting><![CDATA[sh run.sh -c all -Djboss.bind.address=0.0.0.0]]></programlisting>
                        </para>
                    </listitem>
                    <para>Important - If there are multiple JBoss installations running in your local network you need
                        to assign a different partition UDP group to each cluster! This can be done by adding
                        <code>-Djboss.partition.udpGroup=230.2.3.4</code>
                        (or any other multicast address you choose thats available)
                        to the start script/command shown above
                    </para>
                    <listitem>
                        <para>To access the backend point your browser to
                            <link href="http://localhost:8080/flexive/adm/">http://localhost:8080/flexive/adm/</link>
                        </para>
                        <para>Alternatively you can specify your server's IP address, which is supported by default,
                            too.
                        </para>
                    </listitem>
                    <para>
                        The default superuser's username and password for the Backend Administration are:
                    </para>
                    <para>username: supervisor, password: supervisor</para>
                </itemizedlist>
            </para>
        </section>
    </section>

    <section xml:id="jboss_windows_installation">
        <title>&Flexive; installation guide for JBoss 4.2 on Windows
        </title>
        <section xml:id="jboss_windows_installation_system_configuration">
            <title>System configuration</title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>Create and copy the datasource config file
                            <filename>flexive-ds.xml</filename>
                            to
                            <filename>${jboss.home}\server\all\deploy\</filename>
                            and adapt to your datasource(s)
                            or simply copy it from the &Flexive; source tree, if available.
                            <programlisting language="xml">
                                <xi:include href="../../src/framework/resources/flexive-ds.xml" parse="text"/>
                            </programlisting>
                        </para>
                    </listitem>
                    <listitem>
                        <para>Extend
                            <filename>${jboss.home}\server\all\conf\login-config.xml</filename>
                            with the following entry:
                            <xi:include href="listings/installation_login-config.xml"/>
                        </para>
                    </listitem>
                    <listitem>
                        <para>Extend
                            <filename>${jboss.home}\server\all\conf\jboss-log4j.xml</filename>
                            to configure logging:
                            <xi:include href="listings/installation_jboss-log4j.xml"/>
                        </para>
                    </listitem>
                    <listitem>
                        <para>Create and copy the cache service file JBossCacheJNDI42-service.xml to
                            ${jboss.home}\server\all\deploy\
                            or simply copy it from the &Flexive; source tree, if available.
                            <programlisting language="xml">
                                <xi:include href="../../src/framework/resources/JBossCacheJNDI42-service.xml"
                                            parse="text"/>
                            </programlisting>
                        </para>
                    </listitem>
                </itemizedlist>
            </para>
        </section>
        <section xml:id="jboss_windows_installation_db_setup">
            <title>Database Setup
            </title>
            <para>
                To set up the databases do the following:
            </para>
            <para>Run
                <code>ant db.create db.config.create</code>
            </para>
        </section>
        <section xml:id="jboss_windows_installation_deployment">
            <title>Deployment</title>
            <para>
                Copy the
                <filename>flexive3.ear</filename>
                to
                <filename>${jboss.home}\server\all\deploy</filename>
                or run<code>ant deploy</code>.
            </para>
        </section>
        <section xml:id="jboss_windows_installation_starting_flexive">
            <title>Starting &Flexive;
            </title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para>Launch JBoss using
                            <programlisting>
                                <![CDATA[start run.bat -c all -Djboss.bind.address=0.0.0.0]]></programlisting>
                        </para>
                    </listitem>
                    <para>Important - If there are multiple JBoss installations running in your local network you need
                        to assign a different partition UDP group to each cluster! This can be done by adding
                        <code>-Djboss.partition.udpGroup=230.2.3.4</code>
                        (or any other multicast address you choose thats available)
                        to the start script/command shown above
                    </para>
                    <listitem>
                        <para>To access the backend point your browser to
                            <link href="http://localhost:8080/flexive/adm/">http://localhost:8080/flexive/adm/</link>
                        </para>
                        <para>Alternatively you can specify your server's IP address which is supported by default,
                            too.
                        </para>
                    </listitem>
                    <para>
                        The default superuser's username and password for the Backend Administration are:
                    </para>
                    <para>username: supervisor, password: supervisor</para>
                </itemizedlist>
            </para>
        </section>
    </section>

    <xi:include href="includes/installation_building_from_source.xml"/>

</chapter>
        